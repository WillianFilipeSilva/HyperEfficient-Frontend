<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="apple-touch-icon" sizes="76x76" href="/assets/img/logo.svg" />
  <link rel="icon" type="image/png" href="/assets/img/logo.svg" />
  <title>HyperEfficient - Equipamentos</title>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link href="/assets/css/nucleo-icons.css" rel="stylesheet" />
  <link href="/assets/css/nucleo-svg.css" rel="stylesheet" />
  <link href="/assets/css/dashboard-tailwind.css" rel="stylesheet" />
  <link href="/assets/css/modal-styles.css" rel="stylesheet" />
</head>

<body style="min-height:100vh; width:100vw; margin:0; background: linear-gradient(to bottom, #60a5fa 0%, #93c5fd 18%, #ffffff 25%, #ffffff 100%);" class="m-0 font-sans text-base antialiased font-normal text-slate-500 w-full flex flex-col">
  <script src="/pages/shared/components/sidebar.js"></script>

  <main class="flex-1 flex flex-col justify-between relative min-h-0 h-full transition-all duration-200 ease-in-out xl:ml-68 rounded-xl">
    <!-- Navbar -->
    <nav class="relative flex flex-wrap items-center justify-between px-0 py-2 mx-6 transition-all ease-in shadow-none duration-250 rounded-2xl lg:flex-nowrap lg:justify-start" navbar-main navbar-scroll="false">
      <div class="flex items-center justify-between w-full mx-auto flex-wrap-inherit">
        <nav>
          <ol class="flex flex-wrap pt-1 mr-12 bg-transparent rounded-lg sm:mr-16">
            <li class="text-sm leading-normal">
              <a class="text-white opacity-50" href="javascript:;">Equipamentos</a>
            </li>
            <li class="text-sm pl-2 capitalize leading-normal text-white before:float-left before:pr-2 before:text-white before:content-['/']" aria-current="page">
              Listagem
            </li>
          </ol>
          <h6 class="mb-0 font-bold text-white capitalize">
            Equipamentos
          </h6>
        </nav>
      </div>
    </nav>

    <!-- Conteúdo Principal -->
    <div class="w-full px-6 py-6 mx-auto flex-1 flex flex-col min-h-0">
      <div class="flex flex-col flex-1 min-h-0 -mx-3">
        <div class="w-full px-3 flex-1 flex flex-col min-h-0">
          
          <!-- Container da Tabela -->
          <div id="equipamentosTableContainer" class="flex-1 min-h-0"></div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <footer class="pt-4">
      <div class="w-full px-6 mx-auto">
        <div class="text-sm leading-normal text-center text-slate-500 lg:text-left">
          © 2025 feito com <i class="fa fa-heart"></i> por
          <span class="font-semibold text-slate-700 dark:text-white">HyperEfficient</span>
        </div>
      </div>
    </footer>
  </main>

  <!-- Modal para Adicionar/Editar Equipamento -->
  <div id="modalEquipamento" class="modal-backdrop hidden">
    <div class="modal-content">
      <div class="mb-6">
        <h3 id="modalTitle" class="text-lg font-semibold text-slate-700 dark:text-white mb-2">Equipamento</h3>
        <p class="text-slate-500 dark:text-white/80 text-sm">Preencha os dados do equipamento</p>
      </div>
      <form id="formEquipamento" class="space-y-4">
        <div>
          <label for="nome" class="block text-sm font-medium text-gray-700 dark:text-white mb-1">
            Nome
          </label>
          <input 
            type="text" 
            id="nome" 
            name="nome"
            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-slate-800 dark:border-gray-600 dark:text-white"
            placeholder="Digite o nome do equipamento"
            required
          />
        </div>

        <div>
          <label for="categoriaId" class="block text-sm font-medium text-gray-700 dark:text-white mb-1">
            Categoria
          </label>
          <select 
            id="categoriaId" 
            name="categoriaId"
            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-slate-800 dark:border-gray-600 dark:text-white"
            required
          >
            <option value="">Selecione uma categoria</option>
            <option value="1">Industrial</option>
            <option value="2">Comercial</option>
            <option value="3">Residencial</option>
          </select>
        </div>

        <div>
          <label for="setorId" class="block text-sm font-medium text-gray-700 dark:text-white mb-1">
            Setor
          </label>
          <select 
            id="setorId" 
            name="setorId"
            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-slate-800 dark:border-gray-600 dark:text-white"
            required
          >
            <option value="">Selecione um setor</option>
            <option value="1">Produção</option>
            <option value="2">Administrativo</option>
            <option value="3">Manutenção</option>
          </select>
        </div>

        <div>
          <label for="gastokwh" class="block text-sm font-medium text-gray-700 dark:text-white mb-1">
            Gasto kW/h
          </label>
          <input 
            type="number" 
            id="gastokwh" 
            name="gastokwh"
            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-slate-800 dark:border-gray-600 dark:text-white"
            placeholder="Ex: 200"
            min="0"
            step="0.01"
            required
          />
        </div>

        <div>
          <label for="descricao" class="block text-sm font-medium text-gray-700 dark:text-white mb-1">
            Descrição
          </label>
          <textarea 
            id="descricao" 
            name="descricao"
            rows="3"
            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-slate-800 dark:border-gray-600 dark:text-white"
            placeholder="Descrição do equipamento (opcional)"
          ></textarea>
        </div>

        <div class="flex justify-end gap-3 pt-6 border-t border-gray-200 dark:border-gray-600">
          <button type="button" id="btnCancelar" class="px-6 py-2.5 rounded-lg bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-slate-700 dark:text-white dark:hover:bg-slate-600 transition-all duration-200 font-semibold flex items-center">
            Cancelar
          </button>
          <button type="submit" id="btnSalvar" class="px-6 py-2.5 rounded-lg bg-blue-500 text-white hover:bg-blue-600 hover:shadow-lg transition-all duration-200 font-semibold flex items-center">
            <i class="fas fa-save mr-2"></i>
            <span data-text>Salvar</span>
            <span data-loading class="hidden">Salvando...</span>
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Scripts -->
  <script src="/pages/shared/services/utils.js"></script>
  <script src="/pages/shared/services/api.js"></script>
  <script src="/pages/shared/services/auth-guard.js"></script>
  <script src="/pages/shared/components/table.js"></script>
  <script src="./listar-equipamentos.js"></script>
</body>
</html> 